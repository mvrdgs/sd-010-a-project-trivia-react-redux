(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{115:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},118:function(e,t,a){e.exports=a(235)},128:function(e,t,a){},129:function(e,t,a){},136:function(e,t){},138:function(e,t){},171:function(e,t){},172:function(e,t){},178:function(e,t){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},235:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),s=a.n(c),i=a(14),o=a(48),l=a(27),u=a(112),m=a(113),p=a(12),h=a(8),d=a.n(h);function f(e){var t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=d.a,n.next=3,d.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 3:return n.t1=n.sent.json(),n.next=6,n.t0.awrap.call(n.t0,n.t1);case 6:return t=n.sent,a=t.results,n.abrupt("return",a);case 9:case"end":return n.stop()}}))}function b(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=d.a,a.next=3,d.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 3:return a.t1=a.sent.json(),a.next=6,a.t0.awrap.call(a.t0,a.t1);case 6:return e=a.sent,t=e.token,a.abrupt("return",t);case 9:case"end":return a.stop()}}))}var v={token:"",questions:[],isLoading:!0},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_FETCH":return Object(p.a)({},e,{isLoading:!0});case"FETCH_TOKEN_SUCCESS":return Object(p.a)({},e,{token:t.payload});case"FETCH_QUESTIONS_SUCCESS":return Object(p.a)({},e,{questions:t.payload,isLoading:!1});default:return e}},g={name:"",assertions:0,score:0,gravatarEmail:"",picture:"https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLAYER":return Object(p.a)({},e,{},t.payload);case"RIGHT_ANSWER":return Object(p.a)({},e,{assertions:e.assertions+1,score:e.score+t.payload});case"CLEAR_SCORE":return Object(p.a)({},e,{assertions:0,score:0});default:return e}},O={filter:{}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FILTER":return Object(p.a)({},t.payload);default:return e}},k=Object(l.combineReducers)({gameData:y,player:E,settings:j}),w=Object(l.createStore)(k,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a))),C=(a(128),a(13)),S=(a(129),a(3)),A=a(4),N=a(6),x=a(5),I=a(7),T=a(32),_=a(10),L=a(114),R=a.n(L),q=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(N.a)(this,Object(x.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(_.a)(a)),a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"handleClick",value:function(){this.props.history.push("/settings")}},{key:"render",value:function(){return r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:this.handleClick,className:"btnConfig"},"Configura\xe7\xf5es")}}]),t}(n.Component),D=(a(215),a(115)),F=a.n(D),Q=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(N.a)(this,Object(x.a)(t).call(this,e))).handleInput=a.handleInput.bind(Object(_.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(_.a)(a)),a.getGravatarPicture=a.getGravatarPicture.bind(Object(_.a)(a)),a.state={gravatarEmail:"",name:""},a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.clearScoreRd)()}},{key:"getGravatarPicture",value:function(e){var t=R()(e).toString();return"https://www.gravatar.com/avatar/".concat(t)}},{key:"handleInput",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t,a,n,r,c,s,i,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e.preventDefault(),t=this.state,a=t.gravatarEmail,n=t.name,r=this.props,c=r.requestToken,s=r.history,i=r.storePlayerInfo,l.next=5,d.a.awrap(c(this.state));case 5:o=this.getGravatarPicture(),i({gravatarEmail:a,name:n,picture:o}),s.push("/game");case 8:case"end":return l.stop()}}),null,this)}},{key:"labelEmail",value:function(e){return r.a.createElement("label",{htmlFor:"input-gravatar-email"},r.a.createElement("span",null,r.a.createElement("strong",null,"Email")),r.a.createElement("input",{id:"input-gravatar-email",name:"gravatarEmail",onChange:this.handleInput,value:e,"data-testid":"input-gravatar-email",autoComplete:"off"}))}},{key:"labelName",value:function(e){return r.a.createElement("label",{htmlFor:"input-player-name"},r.a.createElement("span",null,r.a.createElement("strong",null,"Name")),r.a.createElement("input",{id:"input-player-name",name:"name",onChange:this.handleInput,value:e,"data-testid":"input-player-name",autoComplete:"off"}))}},{key:"labelBtn",value:function(e,t,a,n){return r.a.createElement("input",{type:"submit",value:"Play","data-testid":"btn-play",className:n.match(e)&&t.length>a?"btnPlay":"",disabled:!n.match(e)||t.length<=a})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.gravatarEmail,n=this.props.history;return r.a.createElement("div",{className:"elements-content"},r.a.createElement("div",{className:"img-content"},r.a.createElement("img",{src:F.a,alt:"logo-login"})),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form-content"},r.a.createElement("div",{className:"inputs-content"},this.labelEmail(a),this.labelName(t)),r.a.createElement("div",{className:"btn-content"},this.labelBtn(/^\w+([.-_]?\w+)*@\w+([.-_]?\w+)*(\.\w{2,3})+$/,t,0,a),r.a.createElement(q,{history:n}))))}}]),t}(n.Component),M=Object(i.b)((function(e){return{token:e.gameData.token}}),(function(e){return{requestToken:function(t){return e((function(e){var t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e({type:"START_FETCH"}),a.next=3,d.a.awrap(b());case 3:t=a.sent,e({type:"FETCH_TOKEN_SUCCESS",payload:t}),localStorage.setItem("token",t);case 6:case"end":return a.stop()}}))}))},storePlayerInfo:function(t){return e({type:"ADD_PLAYER",payload:t})},clearScoreRd:function(){return e({type:"CLEAR_SCORE"})}}}))(Q),P=function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",{className:"main-content"},r.a.createElement(M,{history:e}))}}]),t}(n.Component);a(216);function G(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return"https://opentdb.com/api_category.php",a.t0=d.a,a.next=4,d.a.awrap(fetch("https://opentdb.com/api_category.php"));case 4:return a.t1=a.sent.json(),a.next=7,a.t0.awrap.call(a.t0,a.t1);case 7:return e=a.sent,t=e.trivia_categories,a.abrupt("return",t);case 10:case"end":return a.stop()}}))}var H=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(N.a)(this,Object(x.a)(t).call(this,e))).state={data:[],filter:{}},a.fetchApi=a.fetchApi.bind(Object(_.a)(a)),a.handlesChange=a.handlesChange.bind(Object(_.a)(a)),a.handleClick=a.handleClick.bind(Object(_.a)(a)),a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.fetchApi()}},{key:"fetchApi",value:function(){var e,t;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(G());case 2:e=a.sent,t=e.map((function(e){return Object.values(e)[1]})),this.setState({data:t});case 5:case"end":return a.stop()}}),null,this)}},{key:"handlesChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.filter;this.setState((function(e){return Object(p.a)({},e,{filter:Object(p.a)({},r,Object(T.a)({},a,n))})}))}},{key:"categoryInput",value:function(){var e=this.state.data;return r.a.createElement("select",{name:"category",id:"category",onChange:this.handlesChange},r.a.createElement("option",{value:"selecione-a-categ"},"Selecione a Categoria"),e.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))}},{key:"difficulttInput",value:function(){return r.a.createElement("select",{name:"difficult",id:"difficult",onChange:this.handlesChange},r.a.createElement("option",{value:"selecione-a-dific"},"Selecione a dificuldade"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard"))}},{key:"typeInput",value:function(){return r.a.createElement("select",{name:"type",id:"type",onChange:this.handlesChange},r.a.createElement("option",{value:"selecione-o-tipo"},"Selecione o Tipo"),r.a.createElement("option",{value:"multiple-choice"},"Multiple choice"),r.a.createElement("option",{value:"true-false"},"True or False"))}},{key:"handleClick",value:function(){var e=this.props,t=e.history;(0,e.setFilter)(this.state.filter),t.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-settings"},r.a.createElement("div",{"data-testid":"settings-title",className:"title-settings"},r.a.createElement("h1",null,"Configura\xe7\xf5es")),r.a.createElement("form",{className:"form-settings"},this.categoryInput(),this.difficulttInput(),this.typeInput()),r.a.createElement("button",{type:"button",className:"btn-settings",onClick:this.handleClick},"Logar"))}}]),t}(n.Component),J=Object(i.b)(null,(function(e){return{setFilter:function(t){return e({type:"ADD_FILTER",payload:t})}}}))(H),U=a(117),W=(a(217),function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.nextQuestion,a=e.hidden;return r.a.createElement("button",{type:"button",hidden:a,className:"btn-next-quest","data-testid":"btn-next",onClick:t},"Pr\xf3xima")}}]),t}(n.Component)),B=a(49),V=function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameData,a=e.selectAnswer,n=t.question,c=t.category,s=t.gameOn,i=t.shuffleAnswers,o=t.correctAnswer;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"question-category"},c),r.a.createElement("p",{"data-testid":"question-text"},Object(B.a)(n))),r.a.createElement("div",{className:"options-content"},i.map((function(e,t){return e===o?r.a.createElement("p",{key:"answer-".concat(t)},r.a.createElement("button",{type:"button","data-testid":"correct-answer",onClick:a,className:s?"btn-alternative":"btn-alternative-correct",disabled:!s},Object(B.a)(e))):r.a.createElement("p",{key:"answer-".concat(t)},r.a.createElement("button",{type:"button","data-testid":"wrong-answer-".concat(t),onClick:a,className:s?"btn-alternative":"btn-alternative-wrong",disabled:!s},Object(B.a)(e)))}))))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(S.a)(this,t),(a=Object(N.a)(this,Object(x.a)(t).call(this,e))).selectAnswer=a.selectAnswer.bind(Object(_.a)(a)),a.sortQuestions=a.sortQuestions.bind(Object(_.a)(a)),a.runGame=a.runGame.bind(Object(_.a)(a)),a.saveAtLocalStorage=a.saveAtLocalStorage.bind(Object(_.a)(a)),a.timeCounter=a.timeCounter.bind(Object(_.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(_.a)(a)),a.saveRankAtLocalStorage=a.saveRankAtLocalStorage.bind(Object(_.a)(a)),a.state={question:"",category:"",difficulty:"",count:0,gameOn:!0,shuffleAnswers:[],correctAnswer:"",time:30,scoreMultiplicators:{hard:3,medium:2,easy:1}},a}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){this.sortQuestions(),this.runGame()}},{key:"saveRankAtLocalStorage",value:function(){var e=this.props.player,t={name:e.name,score:e.score},a=JSON.parse(localStorage.getItem("ranking")||"[]");a.push(t),localStorage.setItem("ranking",JSON.stringify(a))}},{key:"runGame",value:function(){var e=this;this.timer=setInterval((function(){e.setState((function(t){return t.time>0&&t.gameOn?{time:t.time-1}:(clearInterval(e.timer),e.saveAtLocalStorage(),{gameOn:!1})}))}),1e3)}},{key:"saveAtLocalStorage",value:function(){var e=this.props.player,t=Object(p.a)({},e);delete t.picture,localStorage.setItem("state",JSON.stringify({player:t}))}},{key:"selectAnswer",value:function(e){var t,a,n,r,c,s,i,o;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.target,this.setState({gameOn:!1}),clearInterval(this.timer),a=this.state,n=a.correctAnswer,r=a.time,c=a.difficulty,s=a.scoreMultiplicators,i=this.props.incrementScore,10,o=10+r*s[c],n!==t.innerText){l.next=10;break}return l.next=10,d.a.awrap(i(o));case 10:this.saveAtLocalStorage();case 11:case"end":return l.stop()}}),null,this)}},{key:"sortQuestions",value:function(){var e=this.state.count,t=this.props.questions[e],a=t.difficulty,n=t.question,r=t.category,c=t.correct_answer,s=t.incorrect_answers,i=[].concat(Object(U.a)(s),[c]).sort((function(){return Math.random()-.5}));this.setState({shuffleAnswers:i,correctAnswer:c,question:n,category:r,difficulty:a})}},{key:"timeCounter",value:function(){var e=this.state,t=e.gameOn,a=e.time;return r.a.createElement("p",{className:0===a||!1===t?"timerPaused":"timer"},a)}},{key:"nextQuestion",value:function(){var e,t,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.props,t=e.history,a=e.questions,n.next=3,d.a.awrap(this.setState((function(e){return{count:e.count+1,time:30,gameOn:!0}})));case 3:this.state.count>=a.length?(this.saveRankAtLocalStorage(),t.push("/feedback")):(this.runGame(),this.sortQuestions());case 5:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.question,a=e.category,n=e.gameOn,c={question:t,category:a,gameOn:n,shuffleAnswers:e.shuffleAnswers,correctAnswer:e.correctAnswer};return r.a.createElement("div",{className:"question-content"},r.a.createElement(V,{gameData:c,selectAnswer:this.selectAnswer}),this.timeCounter(),r.a.createElement(W,{hidden:n,nextQuestion:this.nextQuestion}))}}]),t}(n.Component),Y=Object(i.b)((function(e){return{questions:e.gameData.questions,player:e.player}}),(function(e){return{incrementScore:function(t){return e({type:"RIGHT_ANSWER",payload:t})}}}))(K),$=(a(231),function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.player,t=e.name,a=e.score,n=e.picture;return r.a.createElement("header",{className:"header-content"},r.a.createElement("img",{src:n,alt:"gravatar-img","data-testid":"header-profile-picture"}),r.a.createElement("div",{className:"player-content"},r.a.createElement("p",{"data-testid":"header-player-name"},r.a.createElement("strong",null,"Player: ".concat(t))),r.a.createElement("p",null,"Score:",r.a.createElement("strong",null,r.a.createElement("span",{"data-testid":"header-score"},a)))))}}]),t}(n.Component));var z=Object(i.b)((function(e){return{player:e.player}}))($),X=function(e){function t(){var e;return Object(S.a)(this,t),(e=Object(N.a)(this,Object(x.a)(t).call(this))).setLocalStorage=e.setLocalStorage.bind(Object(_.a)(e)),e}return Object(I.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.requestQuestions)(localStorage.getItem("token")),this.setLocalStorage()}},{key:"setLocalStorage",value:function(){var e=this.props.player,t=e.name,a=e.gravatarEmail,n={player:{name:t,assertions:e.assertions,score:e.score,gravatarEmail:a}};localStorage.setItem("state",JSON.stringify(n))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.history;return r.a.createElement("div",{className:"main-content"},r.a.createElement(z,null),r.a.createElement("div",{className:"question-main-content"},t?r.a.createElement("p",{className:"loading"},"Carregando...."):r.a.createElement(Y,{history:a})))}}]),t}(n.Component),Z=Object(i.b)((function(e){return{isLoading:e.gameData.isLoading,player:e.player}}),(function(e){return{requestQuestions:function(t){return e(function(e){return function(t){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:"START_FETCH"}),n.next=3,d.a.awrap(f(e));case 3:a=n.sent,t({type:"FETCH_QUESTIONS_SUCCESS",payload:a});case 5:case"end":return n.stop()}}))}}(t))}}}))(X),ee=(a(232),function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("button",{type:"button","data-testid":"btn-play-again",className:"play-again-button",name:"login",onClick:function(){return e.push("/")}},r.a.createElement("strong",null,"Jogar Novamente"))}}]),t}(n.Component)),te=function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("button",{type:"button","data-testid":"btn-ranking",className:"show-ranking-button",name:"ranking",onClick:function(){return e.push("/ranking")}},r.a.createElement("strong",null,"Ver Ranking"))}}]),t}(n.Component),ae=function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score;return r.a.createElement("div",{className:"results-content"},t>=3?r.a.createElement("p",{"data-testid":"feedback-text"},r.a.createElement("strong",null,"Mandou bem!")):r.a.createElement("p",{"data-testid":"feedback-text"},r.a.createElement("strong",null,"Podia ser melhor...")),r.a.createElement("div",{className:"percent-content"},r.a.createElement("p",null,r.a.createElement("strong",null,"Voc\xea acertou um total de \xa0",r.a.createElement("span",{"data-testid":"feedback-total-question"},t),"\xa0",t<=1?"pergunta!":"perguntas!")),r.a.createElement("p",null,r.a.createElement("strong",null,"Voc\xea obteve \xa0",r.a.createElement("span",{"data-testid":"feedback-total-score"},a),"\xa0 pontos!"))))}}]),t}(n.Component),ne=function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.props,t=e.history,a=e.player,n=a.assertions,c=a.score;return r.a.createElement("div",{className:"header-feedback"},r.a.createElement(z,null),r.a.createElement(ae,{assertions:n,score:c}),r.a.createElement(ee,{history:t}),r.a.createElement(te,{history:t}))}}]),t}(n.Component),re=Object(i.b)((function(e){return{player:e.player}}))(ne),ce=(a(233),function(e){function t(){return Object(S.a)(this,t),Object(N.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(A.a)(t,[{key:"orderMyArray",value:function(e){e.sort((function(e,t){return t.score-e.score}))}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return this.orderMyArray(e),r.a.createElement("div",{className:"ranking-content"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Meu Ranking"),e.map((function(e,t){return r.a.createElement("p",{key:"player-name-".concat(t)},r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",null," - "),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score))})),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{className:"play-again-button",type:"button","data-testid":"btn-go-home"},"Voltar ao in\xedcio")))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,{store:w},r.a.createElement(o.a,null,r.a.createElement((function(){return r.a.createElement(C.c,null,r.a.createElement(C.a,{path:"/feedback",component:re}),r.a.createElement(C.a,{path:"/ranking",component:ce}),r.a.createElement(C.a,{path:"/settings",component:J}),r.a.createElement(C.a,{path:"/game",component:Z}),r.a.createElement(C.a,{exact:!0,path:"/",component:P}))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[118,1,2]]]);
//# sourceMappingURL=main.ce24587a.chunk.js.map